<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Workbench Library: MIDI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Workbench Library
   &#160;<span id="projectnumber">0.1b</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__midi.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MIDI</div>  </div>
</div><!--header-->
<div class="contents">

<p>MIDI system initialization, deinitialization, and processing for Workbench applications.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac3a6502ef7b764a0c4ac32264816910d"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi.html#gac3a6502ef7b764a0c4ac32264816910d">MidiCallback</a>) (const void *, void *, unsigned long, void *)</td></tr>
<tr class="memdesc:gac3a6502ef7b764a0c4ac32264816910d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition for MIDI callback functions.  <a href="group__midi.html#gac3a6502ef7b764a0c4ac32264816910d">More...</a><br /></td></tr>
<tr class="separator:gac3a6502ef7b764a0c4ac32264816910d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga98b3c7c8e3e254ea1026ff3f781add0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi.html#ga98b3c7c8e3e254ea1026ff3f781add0d">midi_init</a> ()</td></tr>
<tr class="memdesc:ga98b3c7c8e3e254ea1026ff3f781add0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the MIDI system.  <a href="group__midi.html#ga98b3c7c8e3e254ea1026ff3f781add0d">More...</a><br /></td></tr>
<tr class="separator:ga98b3c7c8e3e254ea1026ff3f781add0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38b6a4a6ec42191fe62ab3b79826020d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__midi.html#ga38b6a4a6ec42191fe62ab3b79826020d">midi_deinit</a> ()</td></tr>
<tr class="memdesc:ga38b6a4a6ec42191fe62ab3b79826020d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the MIDI system.  <a href="group__midi.html#ga38b6a4a6ec42191fe62ab3b79826020d">More...</a><br /></td></tr>
<tr class="separator:ga38b6a4a6ec42191fe62ab3b79826020d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>MIDI system initialization, deinitialization, and processing for Workbench applications. </p>
<p>This header file defines functions and macros for managing MIDI input and output using the PortMidi library. It includes type definitions for MIDI callback functions and a comprehensive set of MIDI message constants.</p>
<p>The <code>midi_init</code> function sets up the MIDI input and output streams, while the <code>midi_deinit</code> function closes the streams and terminates the MIDI system. The <code>__midi_callback</code> function processes incoming MIDI messages, and the <code>process_midi</code> function handles MIDI message parsing and logging. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gac3a6502ef7b764a0c4ac32264816910d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3a6502ef7b764a0c4ac32264816910d">&#9670;&nbsp;</a></span>MidiCallback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* MidiCallback) (const void *, void *, unsigned long, void *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition for MIDI callback functions. </p>
<p>A <code>MidiCallback</code> function is called to handle incoming and outgoing MIDI messages. It takes the following parameters:</p><ul>
<li><code>input_buffer</code>: A pointer to the input MIDI buffer.</li>
<li><code>output_buffer</code>: A pointer to the output MIDI buffer.</li>
<li><code>block_size</code>: The number of MIDI events in the buffer.</li>
<li><code>user_data</code>: A pointer to user-defined data passed to the callback function.</li>
</ul>
<p>Example usage: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> my_midi_callback(<span class="keyword">const</span> <span class="keywordtype">void</span> *input_buffer, <span class="keywordtype">void</span> *output_buffer, <span class="keywordtype">unsigned</span></div>
<div class="line"><span class="keywordtype">long</span> block_size, <span class="keywordtype">void</span> *user_data) {</div>
<div class="line">  <span class="keyword">const</span> PmEvent *in_buffer = (<span class="keyword">const</span> PmEvent*)in;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0; i &lt; length; ++i) {</div>
<div class="line">    PmEvent <span class="keyword">event</span> = in_buffer[i];</div>
<div class="line">    PmMessage message = <span class="keyword">event</span>.message;</div>
<div class="line">    <a class="code" href="workbench__logger_8h.html#a6b31466d2e9b5a39883f1c4271b9779d">log_i</a>(<span class="stringliteral">&quot;%i&quot;</span>, message);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aworkbench__logger_8h_html_a6b31466d2e9b5a39883f1c4271b9779d"><div class="ttname"><a href="workbench__logger_8h.html#a6b31466d2e9b5a39883f1c4271b9779d">log_i</a></div><div class="ttdeci">#define log_i(message,...)</div><div class="ttdoc">Logs an info message.</div><div class="ttdef"><b>Definition:</b> workbench_logger.h:135</div></div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga38b6a4a6ec42191fe62ab3b79826020d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38b6a4a6ec42191fe62ab3b79826020d">&#9670;&nbsp;</a></span>midi_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void midi_deinit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the MIDI system. </p>
<p>This function stops the MIDI system, frees allocated buffers, and terminates the PortMidi library. It logs any errors that occur during the deinitialization process. </p>

</div>
</div>
<a id="ga98b3c7c8e3e254ea1026ff3f781add0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98b3c7c8e3e254ea1026ff3f781add0d">&#9670;&nbsp;</a></span>midi_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void midi_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the MIDI system. </p>
<p>This function initializes the PortMidi library, sets up the MIDI input and output devices based on the configuration settings, and allocates buffers for MIDI events. It also starts the MIDI input and output streams if they are enabled in the configuration.</p>
<p>If an error occurs during initialization, it logs the error message and deinitializes the MIDI system. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
